<!DOCTYPE HTML>
<html>
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="x-ua-compatible" content="IE=Edge">
        <meta name="viewport" content="width=device-width, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <script type="text/javascript" src="js/enchant.js"></script>
        <script type="text/javascript" src="js/plugins/tl.enchant.js"></script>
        <style>body {margin: 0; padding: 0}</style>

        <script type="text/javascript">
            enchant();
            
            var lux = 29;
            /*Para que funcione en PC retirar estas lineas*/
            /*hasta aca */
            
            Mole = enchant.Class.create(Sprite, {
                initialize: function () {
                    var game = enchant.Game.instance;
                    Sprite.call(this, 68, 60);
                    
                        this.image = game.assets["mole-dark2.png"];
                    
                    this.addEventListener("touchstart", function () {
                        this.scene.removeChild(this);
                    });
                }
            });
            
            Enemy = enchant.Class.create(Mole, {
                initialize: function () {
                    Mole.call(this);
                    this.frame = [0,1,2,3,4,5,4,3,2,1,0];
                    var ram1 = Math.random();
                    var ram2 = Math.random();
                                        
                    this.x = ram1 * 410;
                    this.y = ram2 * 150 + 100;
                    
                }
            });

            window.onload = function () {
                var game = new Game(480, 320);
                game.fps = 20;
                game.preload("mole.png", "farm.png", "mole-dark2.png"); /* Precargar imagenes */

                game.onload = function () {
                    var map = new Map(480, 320);
                    map.image = game.assets["farm.png"];
                    map.loadData([[0]]); /*Cargar Mapa Posicion 0 por ser uno solo */
                    
                    game.rootScene.addChild(map);

                    game.rootScene.addEventListener('enterframe', function () {
                        if (game.frame % 20 == 0) {
                            this.addChild(new Enemy());
                        }
                    });

                };
                game.start();
            };
        </script>
    </head>
    <title>Mata Topos</title>
    <body>
    </body>
</html>